- [ ] `workspace-slice`: Workspaceの低レベル状態 + API を集約（XYFlow向けUI state含む）
  - [x] `addNode(node, ui?)`
  - [x] `updateNode(nodeId, data)`
  - [x] `setUiNodeState(nodeId, partialUi)`
  - [x] `setUiViewport(viewport, { save? })`（必要なら `_skipNextSave` 連携）
  - [x] `setSelectedConnectionIds(next)`
  - [x] `updateWorkspaceName(name)`（workspace.name 更新）
  - [x] `setCurrentShortcutScope(scope, { save? })`（canvas / properties-panel）
  - [x] `addConnection(connection)` / `removeConnection(connectionId)`
  - [x] `removeNode(nodeId)`（node本体のみ削除）
- [ ] `app-slice`: Workspace派生の低レベル selector / utility
  - [x] `hasStartNode()`
  - [x] `hasEndNode()`
  - [x] `isStartNodeConnectedToEndNode()`
- [ ] `persistence`: `_skipNextSave` 等の store 状態と連携（必要なら）
  - [x] `_skipNextSave` を subscribe 側でリセットして無視
- [ ] `external deps`: 外部I/O依存を注入（テスト可能に）
  - [x] `GiselleClientProvider`（usecaseから `useGiselle()` で参照）
- [ ] `ui-slice`（Workspace外の一時UI state）
  - [x] `clipboardNode` / `setClipboardNode`（Copy/Paste/Duplicate 用）
  - [x] `llmProviders`（Toolbar等が参照）


