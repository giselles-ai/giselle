# Continuity ledger (per-branch)

## Human intent (must not be overwritten)

<!--
Write 1â€“5 bullets capturing the human goal and motivation.
This section is intentionally stable: do not overwrite it when updating the ledger.
-->

- Move API Publishing key management implementation from SDK packages into Studio app (`apps/studio.giselles.ai/lib/api-keys`), while keeping the existing SDK code in place for now.
- Adjust Studio UI/API as needed to use the new app-side implementation.

## Goal (incl. success criteria)

- Create `apps/studio.giselles.ai/lib/api-keys` with ported API key management logic and integrate it with Studio UI/API, without removing SDK implementations.

## Constraints/Assumptions

- Keep `packages/protocol` and `packages/giselle` API publishing code intact (deprecated but still present).
- Follow existing naming/layout conventions and keep changes minimal.

## Key decisions

- 

## State

- Studio API key management lives in `apps/studio.giselles.ai/lib/api-keys`, now with local schemas (no protocol dependency).
- Studio UI/API routes for API keys remain unchanged (previous SDK-backed behavior).

## Done

- Added app-side API key helpers (create/get/revoke/verify) and token parsing in `apps/studio.giselles.ai/lib/api-keys`.
- Added `apps/studio.giselles.ai/lib/api-keys/schema.ts` and removed protocol imports from api-keys implementation.
- Reverted changes to Studio API routes and UI (kept existing SDK-backed behavior).

## Now

- Keep API key management logic in app-side libs while leaving current UI/API wiring unchanged.

## Next

- Consider adding revocation/rotation endpoints if needed by UI later.
- Manage API keys in the database (persist and operate on them via DB instead of in-memory / derived-only logic).

## Open questions (UNCONFIRMED if needed)

- 

## Working set (files/ids/commands)

- `apps/studio.giselles.ai/lib/api-keys/api-secrets.ts`
- `apps/studio.giselles.ai/lib/api-keys/token.ts`
- `apps/studio.giselles.ai/lib/api-keys/index.ts`
- `apps/studio.giselles.ai/lib/api-keys/schema.ts`
